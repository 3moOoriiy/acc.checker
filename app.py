import streamlit as st
import requests
import re

def ุงูุชุญูู_ูู_ุญุงูุฉ_ุงูุญุณุงุจ(ุฑุงุจุท, ุงูููุตุฉ):
    headers = {
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",
        "Accept-Language": "ar,en-US;q=0.9,en;q=0.8"
    }

    try:
        # ุชูุธูู ุงูุฑุงุจุท ูุงูุชุฃูุฏ ูู ุตุญุชู
        ุฑุงุจุท = re.sub(r'https?://(www\.)?', 'https://', ุฑุงุจุท.strip())
        if not ุฑุงุจุท.startswith('https://'):
            ุฑุงุจุท = f'https://{ุฑุงุจุท}'

        response = requests.get(ุฑุงุจุท, headers=headers, timeout=15)
        content = response.text.lower()

        if ุงูููุตุฉ == "ุชููุชุฑ/ุฅูุณ":
            # ุนูุงูุงุช ุงูุชุนููู ุงูุฃูุซุฑ ุฏูุฉ
            ุนูุงูุงุช_ุงูุชุนููู = [
                r'account suspended',
                r'x suspends accounts',
                r'ุญุณุงุจ ููููู',
                r'ุชู ุชุนููู ุงูุญุณุงุจ',
                r'account_status[":\s]+suspended',
                r'this account is suspended',
                r'suspendedaccount',
                r'ุชุนููู_ุงูุญุณุงุจ',
                r'<title>ุญุณุงุจ ููููู</title>'
            ]

            if any(re.search(pattern, content) for pattern in ุนูุงูุงุช_ุงูุชุนููู):
                return "โ๏ธ ุงูุญุณุงุจ ููููู (ูุนูู)"
            
            # ุชุญุณูู ุงูุชุดุงู ุงูุญุณุงุจุงุช ุงููุญุฐููุฉ
            if re.search(r'this account doesn[\'โ]t exist|page doesn[\'โ]t exist|ุงูุญุณุงุจ ุบูุฑ ููุฌูุฏ', content):
                return "โ ุงูุญุณุงุจ ุบูุฑ ููุฌูุฏ ุฃู ูุญุฐูู"
            
            # ุฅุฐุง ูู ููู ููุงู ูุญุชูู ูููุณุชุฎุฏู (ุนูุงูุฉ ุนูู ุชุนููู ุงูุญุณุงุจ)
            if re.search(r'no tweets yet|ูุง ููุฌุฏ ูุญุชูู', content):
                return "โ๏ธ ุงูุญุณุงุจ ูุฏ ูููู ููููููุง ุฃู ุฌุฏูุฏูุง"
            
            return "โ ุงูุญุณุงุจ ูุดุท"

        # ุจุงูู ุงูููุตุงุช...
        
    except requests.RequestException as e:
        return f"โ ุฎุทุฃ ูู ุงูุงุชุตุงู: {str(e)}"

# ูุงุฌูุฉ ุงููุณุชุฎุฏู
st.set_page_config(page_title="๐ ูุญุต ุญุงูุฉ ุงูุญุณุงุจุงุช - ุงูุฅุตุฏุงุฑ ุงููุญุณู", layout="centered")
st.title("๐ ูุญุต ุญุงูุฉ ุงูุญุณุงุจุงุช (ุงูุฅุตุฏุงุฑ ุงููุญุณู)")

with st.expander("ุชุนูููุงุช ูููุฉ"):
    st.write("""
    - ุชุฃูุฏ ูู ูุชุงุจุฉ ุฑุงุจุท ุงูุญุณุงุจ ุจุดูู ุตุญูุญ
    - ููุญุณุงุจุงุช ุงููุนููุฉุ ูุฏ ุชุญุชุงุฌ ุฅูู ุชุญุฏูุซ ุงูุตูุญุฉ ุนุฏุฉ ูุฑุงุช
    - ุจุนุถ ุงูุญุณุงุจุงุช ูุฏ ุชุธูุฑ ููุดุทุฉ ุฑุบู ุชุนููููุง ูุคูุชูุง
    """)

ุงูููุตุฉ = st.selectbox("ุงุฎุชุฑ ุงูููุตุฉ:", ["ุชููุชุฑ/ุฅูุณ", "ุฑูุฏูุช", "ุชูู ุชูู"])
ุฑุงุจุท = st.text_input("ุฑุงุจุท ุงูุญุณุงุจ", placeholder="https://x.com/username")

if st.button("ูุญุต ุฏููู", type="primary"):
    if ุฑุงุจุท:
        with st.spinner("ุฌุงุฑู ุงููุญุต ุจุนูู..."):
            ุงููุชูุฌุฉ = ุงูุชุญูู_ูู_ุญุงูุฉ_ุงูุญุณุงุจ(ุฑุงุจุท, ุงูููุตุฉ)
            
            if "ููููู" in ุงููุชูุฌุฉ:
                st.error(ุงููุชูุฌุฉ)
            elif "ุบูุฑ ููุฌูุฏ" in ุงููุชูุฌุฉ:
                st.warning(ุงููุชูุฌุฉ)
            else:
                st.success(ุงููุชูุฌุฉ)
    else:
        st.warning("ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฑุงุจุท ุงูุญุณุงุจ ุฃููุงู")

st.markdown("---")
st.caption("ููุงุญุธุฉ: ูุฐู ุงูุฃุฏุงุฉ ูุง ุชุถูู ุฏูุฉ 100%ุ ุฎุงุตุฉ ููุญุณุงุจุงุช ุงููุนููุฉ ูุคูุชูุง")

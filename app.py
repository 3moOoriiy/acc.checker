import streamlit as st
import requests
import re

def ุงูุชุญูู_ูู_ุญุงูุฉ_ุงูุญุณุงุจ(ุฑุงุจุท, ุงูููุตุฉ):
    headers = {
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",
        "Accept-Language": "ar,en-US;q=0.9,en;q=0.8"
    }

    try:
        # ุชูุธูู ุงูุฑุงุจุท ูุงูุชุฃูุฏ ูู ุตุญุชู
        ุฑุงุจุท = re.sub(r'https?://(www\.)?', 'https://', ุฑุงุจุท.strip())
        if not ุฑุงุจุท.startswith('https://'):
            ุฑุงุจุท = f'https://{ุฑุงุจุท}'

        response = requests.get(ุฑุงุจุท, headers=headers, timeout=15)
        content = response.text.lower()

        if ุงูููุตุฉ == "ุชููุชุฑ/ุฅูุณ":
            # ุนูุงูุงุช ุงูุชุนููู ุงูุฃูุซุฑ ุฏูุฉ (ุชู ุชุญุฏูุซูุง)
            ุนูุงูุงุช_ุงูุชุนููู = [
                r'account[\s_]*suspended',
                r'x[\s_]*suspends[\s_]*accounts',
                r'ุญุณุงุจ[\s_]*ููููู',
                r'ุชู[\s_]*ุชุนููู[\s_]*ุงูุญุณุงุจ',
                r'account_status[":\s]+suspended',
                r'suspendedaccount',
                r'ุชุนููู[\s_]*ุงูุญุณุงุจ',
                r'<title>ุญุณุงุจ ููููู</title>',
                r'content="ุญุณุงุจ ููููู"',
                r'ุญุณุงุจู ูุบูู'
            ]

            if any(re.search(pattern, content) for pattern in ุนูุงูุงุช_ุงูุชุนููู):
                return "โ๏ธ ุงูุญุณุงุจ ููููู (ูุนูู)"
            
            # ุชุญุณูู ุงูุชุดุงู ุงูุญุณุงุจุงุช ุงููุญุฐููุฉ
            if re.search(r'this[\s_]*account[\s_]*doesn[\'โ]t[\s_]*exist|page[\s_]*doesn[\'โ]t[\s_]*exist|ุงูุญุณุงุจ[\s_]*ุบูุฑ[\s_]*ููุฌูุฏ', content):
                return "โ ุงูุญุณุงุจ ุบูุฑ ููุฌูุฏ ุฃู ูุญุฐูู"
            
            # ุฅุฐุง ูู ููู ููุงู ูุญุชูู ูููุณุชุฎุฏู
            if re.search(r'no[\s_]*tweets[\s_]*yet|ูุง[\s_]*ููุฌุฏ[\s_]*ูุญุชูู|ูุฐุง[\s_]*ุงููุณุชุฎุฏู[\s_]*ููุณ[\s_]*ูุฏูู[\s_]*ุชุบุฑูุฏุงุช', content):
                return "โ๏ธ ุงูุญุณุงุจ ูุงุฑุบ (ูุฏ ูููู ุฌุฏูุฏูุง ุฃู ููููููุง)"
            
            return "โ ุงูุญุณุงุจ ูุดุท (ุงูุนูููุงุช ููุท)"

    except requests.RequestException as e:
        return f"โ ุฎุทุฃ ูู ุงูุงุชุตุงู: {str(e)}"

# ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงููุญุณูุฉ
st.set_page_config(page_title="๐ ูุญุต ุญุงูุฉ ุงูุญุณุงุจุงุช - ุงููุณุฎุฉ ุงูููุงุฆูุฉ", layout="centered")
st.title("๐ ูุญุต ุญุงูุฉ ุงูุญุณุงุจุงุช ุจุฏูุฉ ุนุงููุฉ")

with st.expander("ุชุนูููุงุช ุงูุงุณุชุฎุฏุงู"):
    st.write("""
    1. ุงุฎุชุฑ ุงูููุตุฉ ุงููุทููุจุฉ (ุชููุชุฑ/ุฅูุณ)
    2. ุฃุฏุฎู ุฑุงุจุท ุงูุญุณุงุจ ุจุดูู ุตุญูุญ
    3. ุงุถุบุท ุนูู ุฒุฑ ุงููุญุต ุงูุฏููู
    4. ุงูุชุธุฑ ุญุชู ุชุธูุฑ ุงููุชูุฌุฉ
    """)

ุงูููุตุฉ = st.selectbox("ุงุฎุชุฑ ุงูููุตุฉ:", ["ุชููุชุฑ/ุฅูุณ"])
ุฑุงุจุท = st.text_input("ุฑุงุจุท ุงูุญุณุงุจ", placeholder="https://x.com/ุงุณู_ุงููุณุชุฎุฏู", help="ุฃุฏุฎู ุงูุฑุงุจุท ูุงููุงู ูุซู: https://x.com/mohamed_ali")

if st.button("ูุญุต ุฏููู", type="primary"):
    if ุฑุงุจุท:
        with st.spinner("ุฌุงุฑู ุงููุญุต ุจุนููุ ุงูุฑุฌุงุก ุงูุงูุชุธุงุฑ..."):
            ุงููุชูุฌุฉ = ุงูุชุญูู_ูู_ุญุงูุฉ_ุงูุญุณุงุจ(ุฑุงุจุท, ุงูููุตุฉ)
            
            if "ููููู" in ุงููุชูุฌุฉ:
                st.error(ุงููุชูุฌุฉ)
                st.warning("ููุงุญุธุฉ: ุชู ุงูุชุดุงู ุฃู ุงูุญุณุงุจ ููููู")
            elif "ุบูุฑ ููุฌูุฏ" in ุงููุชูุฌุฉ:
                st.warning(ุงููุชูุฌุฉ)
            elif "ูุงุฑุบ" in ุงููุชูุฌุฉ:
                st.info(ุงููุชูุฌุฉ)
            else:
                st.success(ุงููุชูุฌุฉ)
                st.info("ุงูุนูููุงุช ููุท โ")
    else:
        st.warning("ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฑุงุจุท ุงูุญุณุงุจ ุฃููุงู")

st.markdown("---")
st.caption("ููุงุญุธุฉ: ูุฐู ุงูุฃุฏุงุฉ ุชููุฑ ุฏูุฉ ุนุงููุฉ ูููููุง ูุง ุชุถูู 100% ุฎุงุตุฉ ููุญุณุงุจุงุช ุงููุนููุฉ ูุคูุชูุง")
